(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[0],{45:function(e,t,a){e.exports=a(70)},50:function(e,t,a){},53:function(e,t,a){},64:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(13),o=a.n(r),s=(a(50),a(9)),l=a(36),i=(a(53),a(18)),m=a.n(i),u=m.a.initializeApp({apiKey:"AIzaSyDdcjidq_OjrpR6OmXbTmFzXXMo_A8IjgU",authDomain:"instagram-clone-react-6fe9a.firebaseapp.com",databaseURL:"https://instagram-clone-react-6fe9a.firebaseio.com",projectId:"instagram-clone-react-6fe9a",storageBucket:"instagram-clone-react-6fe9a.appspot.com",messagingSenderId:"1022440954103",appId:"1:1022440954103:web:6b074a3faacc135a255bf2",measurementId:"G-KZ178CZ2PJ"}).firestore(),p=m.a.auth(),d=m.a.storage(),g=(a(64),a(97));var f=function(e){var t=e.user,a=e.postId,r=e.username,o=e.caption,l=e.imageUrl,i=Object(n.useState)([]),p=Object(s.a)(i,2),d=p[0],f=p[1],h=Object(n.useState)(""),v=Object(s.a)(h,2),E=v[0],b=v[1];return Object(n.useEffect)((function(){var e;return a&&(e=u.collection("posts").doc(a).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){f(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[a]),c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__header"},c.a.createElement(g.a,{className:"post__avatar",alt:"Yash Gupta",src:"/static/images/avatar/1.jpg"}),c.a.createElement("h3",null,r)),c.a.createElement("img",{className:"post__image",src:l,alt:""}),c.a.createElement("h4",{className:"post__text"},c.a.createElement("strong",null,r)," :",o),c.a.createElement("div",{className:"post__comments"},d.map((function(e){return c.a.createElement("p",null,c.a.createElement("strong",null,e.username),e.text)}))),t&&c.a.createElement("form",null,c.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment",value:E,onChange:function(e){return b(e.target.value)}}),c.a.createElement("button",{className:"post__input",type:"submit",onClick:function(e){e.preventDefault(),u.collection("posts").doc(a).collection("comments").add({text:E,username:t.displayName,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),b("")}},"Post")))},h=a(93),v=a(94),E=a(96),b=a(95);a(69);var _=function(e){var t=e.username,a=Object(n.useState)(""),r=Object(s.a)(a,2),o=r[0],l=r[1],i=Object(n.useState)(0),p=Object(s.a)(i,2),g=p[0],f=p[1],h=Object(n.useState)(null),v=Object(s.a)(h,2),E=v[0],_=v[1];return c.a.createElement("div",{className:"imageUpload"},c.a.createElement("progress",{className:"imageUpload__progress",value:g,max:"100"}),c.a.createElement("input",{type:"text",placeholder:"enter a caption..",onChange:function(e){return l(e.target.value)},value:o}),c.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&_(e.target.files[0])}}),c.a.createElement(b.a,{onClick:function(){d.ref("images/".concat(E.name)).put(E).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);f(t)}),(function(e){console.log(e),alert(e.message)}),(function(){d.ref("images").child(E.name).getDownloadURL().then((function(e){u.collection("posts").add({timestamp:m.a.firestore.FieldValue.serverTimestamp(),caption:o,imageUrl:e,username:t}),f(0),l(""),_(null)}))}))}},"Upload"))};function j(){return Math.round(20*Math.random())-10}function O(){var e=50+j(),t=50+j();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var w=Object(h.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var y=function(){var e=w(),t=Object(n.useState)(O),a=Object(s.a)(t,1)[0],r=Object(n.useState)([]),o=Object(s.a)(r,2),i=o[0],m=o[1],d=Object(n.useState)(!1),g=Object(s.a)(d,2),h=g[0],j=g[1],y=Object(n.useState)(""),N=Object(s.a)(y,2),S=N[0],C=N[1],k=Object(n.useState)(""),I=Object(s.a)(k,2),x=I[0],U=I[1],A=Object(n.useState)(""),B=Object(s.a)(A,2),D=B[0],L=B[1],M=Object(n.useState)(null),P=Object(s.a)(M,2),R=P[0],T=P[1],W=Object(n.useState)(!1),F=Object(s.a)(W,2),z=F[0],J=F[1];return Object(n.useEffect)((function(){var e=p.onAuthStateChanged((function(e){e?(console.log(e),T(e)):T(null)}));return function(){e()}}),[R,S]),Object(n.useEffect)((function(){u.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),c.a.createElement("div",{className:"app"},c.a.createElement(v.a,{open:h,onClose:function(){return j(!1)}},c.a.createElement("div",{style:a,className:e.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})),c.a.createElement(E.a,{placeholder:"username",type:"text",value:S,onChange:function(e){return C(e.target.value)}}),c.a.createElement(E.a,{placeholder:"email",type:"text",value:D,onChange:function(e){return L(e.target.value)}}),c.a.createElement(E.a,{placeholder:"password",type:"password",value:x,onChange:function(e){return U(e.target.value)}}),c.a.createElement(b.a,{type:"submit",onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(D,x).then((function(e){return e.user.updateProfile({displayName:S})})).catch((function(e){return alert(e.message)})),j(!1)}},"Sign Up")))),c.a.createElement(v.a,{open:z,onClose:function(){return J(!1)}},c.a.createElement("div",{style:a,className:e.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})),c.a.createElement(E.a,{placeholder:"email",type:"text",value:D,onChange:function(e){return L(e.target.value)}}),c.a.createElement(E.a,{placeholder:"password",type:"password",value:x,onChange:function(e){return U(e.target.value)}}),c.a.createElement(b.a,{type:"submit",onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(D,x).catch((function(e){return alert(e.message)})),J(!1)}},"Sign In")))),c.a.createElement("div",{className:"app__header"},c.a.createElement("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),R?c.a.createElement(b.a,{onClick:function(){return p.signOut()}},"Log Out"):c.a.createElement("div",{className:"app__loginContainer"},c.a.createElement(b.a,{onClick:function(){return J(!0)}},"Log in"),c.a.createElement(b.a,{onClick:function(){return j(!0)}},"Sign Up"))),c.a.createElement("div",{className:"app__posts"},c.a.createElement("div",{className:"app__postsLeft"},i.map((function(e){var t=e.id,a=e.post;return c.a.createElement(f,{user:R,key:t,postId:t,username:a.username,caption:a.caption,imageUrl:a.imageUrl})}))),c.a.createElement("div",{className:"app__postsRight"},c.a.createElement(l.a,{url:"https://instagr.am/p/Zw9o4/",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}}))),(null===R||void 0===R?void 0:R.displayName)?c.a.createElement(_,{username:R.displayName}):c.a.createElement("h3",null,"Sorry you need to loginn"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.8dca127e.chunk.js.map